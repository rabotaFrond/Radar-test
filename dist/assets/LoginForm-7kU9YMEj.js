import{j as t,r as B,u as J}from"./index-CValbs4P.js";import{u as K,B as Q}from"./Box-D1DBkD2W.js";import{c as y,u as c,P as X,T as b,a as P,b as Y}from"./Api-CvTXPmJ9.js";import{l as _}from"./7153808-Didc4U8Z.js";import{g as ee,a as se,u as te,s as A,c as oe,b as j,d as re,m as ae,e as L,l as $,f as h,B as le}from"./Button-BJT__Nke.js";import{I as ne,C as ie}from"./Close-riO2CiG5.js";function ce(e){return se("MuiAlert",e)}const w=ee("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),pe=y(t.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),de=y(t.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),ue=y(t.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),ge=y(t.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),me=e=>{const{variant:o,color:r,severity:s,classes:a}=e,p={root:["root",`color${j(r||s)}`,`${o}${j(r||s)}`,`${o}`],icon:["icon"],message:["message"],action:["action"]};return re(p,ce,a)},ve=A(X,{name:"MuiAlert",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:r}=e;return[o.root,o[r.variant],o[`${r.variant}${j(r.color||r.severity)}`]]}})(ae(({theme:e})=>{const o=e.palette.mode==="light"?L:$,r=e.palette.mode==="light"?$:L;return{...e.typography.body2,backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(e.palette).filter(h(["light"])).map(([s])=>({props:{colorSeverity:s,variant:"standard"},style:{color:e.vars?e.vars.palette.Alert[`${s}Color`]:o(e.palette[s].light,.6),backgroundColor:e.vars?e.vars.palette.Alert[`${s}StandardBg`]:r(e.palette[s].light,.9),[`& .${w.icon}`]:e.vars?{color:e.vars.palette.Alert[`${s}IconColor`]}:{color:e.palette[s].main}}})),...Object.entries(e.palette).filter(h(["light"])).map(([s])=>({props:{colorSeverity:s,variant:"outlined"},style:{color:e.vars?e.vars.palette.Alert[`${s}Color`]:o(e.palette[s].light,.6),border:`1px solid ${(e.vars||e).palette[s].light}`,[`& .${w.icon}`]:e.vars?{color:e.vars.palette.Alert[`${s}IconColor`]}:{color:e.palette[s].main}}})),...Object.entries(e.palette).filter(h(["dark"])).map(([s])=>({props:{colorSeverity:s,variant:"filled"},style:{fontWeight:e.typography.fontWeightMedium,...e.vars?{color:e.vars.palette.Alert[`${s}FilledColor`],backgroundColor:e.vars.palette.Alert[`${s}FilledBg`]}:{backgroundColor:e.palette.mode==="dark"?e.palette[s].dark:e.palette[s].main,color:e.palette.getContrastText(e.palette[s].main)}}}))]}})),xe=A("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(e,o)=>o.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),fe=A("div",{name:"MuiAlert",slot:"Message",overridesResolver:(e,o)=>o.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),Se=A("div",{name:"MuiAlert",slot:"Action",overridesResolver:(e,o)=>o.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),z={success:t.jsx(pe,{fontSize:"inherit"}),warning:t.jsx(de,{fontSize:"inherit"}),error:t.jsx(ue,{fontSize:"inherit"}),info:t.jsx(ge,{fontSize:"inherit"})},Ce=B.forwardRef(function(o,r){const s=te({props:o,name:"MuiAlert"}),{action:a,children:p,className:n,closeText:x="Close",color:d,components:u={},componentsProps:f={},icon:g,iconMapping:m=z,onClose:v,role:T="alert",severity:S="success",slotProps:R={},slots:k={},variant:O="standard",...E}=s,l={...s,color:d,severity:S,variant:O,colorSeverity:d||S},C=me(l),i={slots:{closeButton:u.CloseButton,closeIcon:u.CloseIcon,...k},slotProps:{...f,...R}},[F,N]=c("root",{ref:r,shouldForwardComponentProp:!0,className:oe(C.root,n),elementType:ve,externalForwardedProps:{...i,...E},ownerState:l,additionalProps:{role:T,elevation:0}}),[W,H]=c("icon",{className:C.icon,elementType:xe,externalForwardedProps:i,ownerState:l}),[U,V]=c("message",{className:C.message,elementType:fe,externalForwardedProps:i,ownerState:l}),[I,M]=c("action",{className:C.action,elementType:Se,externalForwardedProps:i,ownerState:l}),[q,Z]=c("closeButton",{elementType:ne,externalForwardedProps:i,ownerState:l}),[D,G]=c("closeIcon",{elementType:ie,externalForwardedProps:i,ownerState:l});return t.jsxs(F,{...N,children:[g!==!1?t.jsx(W,{...H,children:g||m[S]||z[S]}):null,t.jsx(U,{...V,children:p}),a!=null?t.jsx(I,{...M,children:a}):null,a==null&&v?t.jsx(I,{...M,children:t.jsx(q,{size:"small","aria-label":x,title:x,color:"inherit",onClick:v,...Z,children:t.jsx(D,{fontSize:"small",...G})})}):null]})}),be=()=>{var d,u;const[e,o]=B.useState(""),r=J(),{register:s,handleSubmit:a,reset:p,formState:{errors:n}}=K({mode:"onBlur"}),x=async f=>{var g;try{await Y(f.username,f.password),alert("Вы успешно авторизовались!"),p(),r("/")}catch(m){const v=((g=m.message)==null?void 0:g.message)||m.message;m.status,o(v)}};return t.jsxs("div",{className:"container",children:[t.jsx("img",{className:"logo",src:_,alt:"Наше священное лого"}),t.jsxs(Q,{children:[t.jsx(b,{variant:"h4",align:"center",gutterBottom:!0,sx:{color:"black"},children:"Авторизация"}),e&&t.jsx(Ce,{className:"server-error",onClose:()=>{o("")},severity:"error",children:t.jsx(b,{style:{whiteSpace:"pre-line"},children:e})}),t.jsxs("form",{onSubmit:a(x),children:[t.jsx(P,{fullWidth:!0,label:"Введите username",...s("username",{required:"Username обязателен",minLength:{value:3,message:"Минимум 3 символов"},maxLength:{value:30,message:"Максимум 30 символов"}}),error:!!n.username,helperText:(d=n.username)==null?void 0:d.message,margin:"normal"}),t.jsx(P,{fullWidth:!0,label:"Введите пароль",type:"password",...s("password",{required:"Пароль обязателен",minLength:{value:8,message:"Минимум 8 символов"},maxLength:{value:50,message:"Максимум 30 символов"}}),error:!!n.password,helperText:(u=n.password)==null?void 0:u.message,margin:"normal"}),t.jsx(le,{type:"submit",variant:"contained",children:"Войти"})]})]})]})};export{be as default};
